<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta charset="UTF-8">
        <title>Ghost Bombers</title>
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>
        <script src="simple.js">

            var background = {x:0, y:0, height: 500, width:1000};

            const player1 = {x:0, y:325, height:105, width:85};

            const player2 = {x:0, y:115, height:105, width:85};


            
            // till att skapa flera "enemies" i slumpmmässiga koordinater
            var enemies = [];

            enemies.push({x: random(totalWidth),
                        y: random(totalHeight),
                        speed: random(1,5)});
        
            enemies.push({x: random(totalWidth),
                        y: random(totalHeight),
                        speed: random(1,5)});
        
            enemies.push({x: random(totalWidth),
                        y: random(totalHeight),
                        speed: random(1,5)});
        
            const enemy = {x: 1000,
                        y: random(totalHeight),
                        speed: random(1,5),
                        height:85,
                        width:75};

            function update()
            {

            picture(background.x, background.y, "img/cemetery.png");
            
            picture(player1.x, player1.y, "img/pixel-ghost.png");

            picture(player2.x, player2.y, "img/pixel-ghostie.png");
        
            picture(enemy.x, enemy.y, "img/pixel-bomb.png");

            // till att både få player1 att använda WASD pilar och hålla sig inom canvas

            if (keyboard.d)
                if (player1.x < totalWidth - (player1.width + 5))
                player1.x += 10;
            if (keyboard.a)
                if (player1.x > 0)
                    player1.x += -10;
            if (keyboard.s)
                if (player1.y < totalHeight - player1.height)
                    player1.y += 10;
            if (keyboard.w)
                if (player1.y > 5)
                    player1.y += -10;

            // player2 med vanliga pilar och att hålla sig inom canvas

            if (keyboard.right)
                if (player2.x < totalWidth - (player2.width + 5))
                    player2.x += 10;
            if (keyboard.left)
                if (player2.x > 0)
                player2.x += -10;
            if (keyboard.down)
                if (player2.y < totalHeight - player2.height)
                player2.y += 10;
            if (keyboard.up)
                if (player2.y > 5)
                player2.y += -10;

            // att "enemy" ska följa efter både player1 och player2 men välja den med kortast distans
                
            if (distance(enemy.x, enemy.y, player1.x, player1.y) < distance(enemy.x, enemy.y, player2.x, player2.y)){
                if (enemy.x < player1.x)
                    enemy.x += enemy.speed;
                else
                    enemy.x -= enemy.speed;
            
                if (enemy.y < player1.y)
                    enemy.y += enemy.speed;
                else
                    enemy.y -= enemy.speed;
            } else {

                if (enemy.x < player2.x)
                    enemy.x += enemy.speed;
                else
                    enemy.x -= enemy.speed;
            
                if (enemy.y < player2.y)
                    enemy.y += enemy.speed;
                else
                    enemy.y -= enemy.speed;
            }    

            // om distansen mellan player1 och enemy når den siffran så avslutas spelet med texted "Game over" i blått
        
            if (distance(player1, enemy) < 60)
            {
                text(100, 250, 100, "Game over!", "blue");
                stopUpdate();
            }

            // om distansen mellan player2 och enemy når den siffran så avslutas spelet med texted "Game over" i rött

            if (distance(player2, enemy) < 60)
            {
                text(100, 250, 100, "Game over!", "red");
                // alert("Game over");
                stopUpdate();
            }
            
            }
        
        
        </script>
    </body>
</html>